### -- ------ ------------------------------------------------------------------
### -- Set up ------------------------------------------------------------------
### -- ------ ------------------------------------------------------------------
# -- Libraries
library(scales)
library(ggpubr)
library(tidyverse)
library(lubridate)
library(excessmort)
dslabs::ds_theme_set()

# -- Loading data
data("puerto_rico_counts")
### -- ---------- ------------------------------------------------------------------
### -- END Set up ------------------------------------------------------------------
### -- ---------- ------------------------------------------------------------------

### -- -------------------------------------------- ------------------------------------------------------------------
### -- Supp figure 7: Population displacement in PR ------------------------------------------------------------------
### -- -------------------------------------------- ------------------------------------------------------------------
supp_fig7 <- puerto_rico_counts %>%
  group_by(date) %>%
  summarize(population = sum(population)) %>%
  ungroup() %>%
  filter(date >= "2017-07-01", date <= "2018-07-01") %>%
  ggplot(aes(date, population)) +
  geom_line() +
  scale_y_continuous(labels = scales::comma,
                     limits = c(2981110, 3330000),
                     breaks = seq(3000000, 3300000, by=50000)) +
  ylab("Population") +
  xlab("Date") +
  theme(axis.text  = element_text(size=12),
        axis.title = element_text(size=13))

# -- Supp figure 7
ggsave("figs/supp-figure-7.pdf",
       plot   = supp_fig7,
       dpi    = 300, 
       height = 6,
       width  = 8)
### -- -------------------------------------------- ------------------------------------------------------------------
### -- END Supp figure 7: Population displacement in PR ------------------------------------------------------------------
### -- -------------------------------------------- ------------------------------------------------------------------
